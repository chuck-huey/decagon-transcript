<!Doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Student Dashboard</title>
    <script>
        if(!localStorage.student_email){
            window.location = "../../index.html";
        }
    </script>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <header>
        <div class="menu-bar">
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
                    <div class="menu-container container">
                        <a class="navbar-brand" href="#"><img src="../images/logo-light-small.png"></a>
                        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav ml-auto">
                                <li class="nav-item active">
                                    <a class="nav-link" href="../../index.html">Home<span class="sr-only">(current)</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">About Us</a>
                                </li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link" href="#"><span id="username"></span> <i class="fa fa-chevron-down" aria-hidden="true"></i></a>
                                    <ul class="dropdown-menu">
                                        <li data-toggle="modal" data-target="#logoutModal">Logout</li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
        </div>
    </header>
    <div class="bread-crumb">
        <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="../student/student-dashboard.html">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">Transcript</li>
        </ol>
        <div class="scroll-box">
            <div class="scroll-text">This is the text that is too long to fit in the box</div>
        </div>
        </nav>
    </div>
    <div class="apply-content">
        <h2>Transcript Application</h2>
        <h4 class="transcript-instruct">kindly select the purpose of your request application</h4>
        <div class="apply-form">
            <form action="" method="POST">
                <table class="table table-borderless" align="center">
                        <tbody>
                            <tr>
                            <td id="right"><label>Transcript Purpose</label></td>
                            <td id="left"><select class="purpose">
                                    <option value="personal">Personal</option>
                                    <option value="academic">Academic/Company</option>
                                </select></td>
                            </tr>
                            <tr id="academic">
                                <td id="right"><label id="label">Email</label></td>
                                <td id="left"><input type="email" id="email-1" name="personal-email-1" placeholder="abc@abc.com">
                                    <button type="button" id="add-btn"><i class="fa fa-plus" aria-hidden="true"></i></button></td>
                            </tr>
                        </tbody>
                        
                    </table>
                    <div class="error"><span class="error-form" id="email_error_message"></span></div>
                    <center><button type="button" id="get-link" class="btn btn-success">Get Link to Pay</button><br>
                    <div id="paypal-button-container" onclick="javascript:this.parentNode.submit()"></div></center>
            </form>
        </div>
    </div>
    <div class="hide-amount">1</div>
    <!-- Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="logoutModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="logoutModalLabel">Are you sure?</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Click "Logout" below if you are ready to end your current session.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">
                        Close
                    </button>
                    <button type="button" class="btn btn-primary logout">Logout</button>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/script.js"></script>

    <!-- Include the PayPal JavaScript SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=AeQYSgKtX5JmEvxV1w3wi-diAl-7Lq9lXoUFDim6-F1-iRS7HgTIgMFDeJrrgb2G8fi8v1FKFWuc_XME&currency=USD"></script>

    <script>
        var amt;
        var allemail = "";
    //Hide the paypal button initially
        $("#paypal-button-container").hide();
    //Getting all the email(s) to send to
        $('input[type="email"]#email-1').focusout(function(){
            var email1 = $(this).val();
            allemail += email1;
        });
        $(document).on('focusout',"#email-2" ,function() {
            var email2 = $(this).val();
            allemail += email2;
        });
        $(document).on('focusout',"#email-3" ,function() {
            var email3 = $(this).val();
            allemail += email3;
        });
        $("select.purpose").change(function(){
        selectedPurpose = $(this).children("option:selected").val();
        if(selectedPurpose == 'personal'){
            var allemail = "";
        }
    });
        // Render the PayPal button into #paypal-button-container
                            paypal.Buttons({

                    // Set up the transaction
                    createOrder: function(data, actions) {
                        amt = $('.hide-amount').text() * 30;
                        return actions.order.create({
                            purchase_units: [{
                                amount: {
                                    value: amt
                                }
                            }]
                        });
                    },

            // Finalize the transaction
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    // Show a success message to the buyer
                    
                    alert('Transaction completed by ' + details + '!');
                });
            }


        }).render('#paypal-button-container');
    </script>
</body>

</html>